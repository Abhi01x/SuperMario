<!DOCTYPE html>
<html>
<head>
<style>
canvas {
	background-image: url("bcakground1.jpg");
	background-size: cover;
}
#platformimage {
	position: relative;
	top: 65px;
	left: -605px;
}
#startBtn {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	padding: 15px 30px;
	font-size: 20px;
	background: #ff4d4d;
	color: white;
	border: none;
	border-radius: 10px;
	cursor: pointer;
	box-shadow: 0 0 15px rgba(255, 77, 77, 0.8);
	transition: 0.3s;
}
#startBtn:hover {
	background: #ff1a1a;
	transform: translate(-50%, -50%) scale(1.05);
}
</style>
</head>
<body>

<!-- Background Music -->
<audio id="bgmusic" src="music.mp3" loop></audio>

<!-- Sound Effects -->
<audio src="jump.wav" id="audio"></audio>
<audio src="mariodie.mp3" id="audio1"></audio>

<!-- Start Button -->
<button id="startBtn" onclick="startGame()">Start Game üéÆ</button>

<script type="text/javascript">
var minGap = 200;
var maxGap = 500;
var gap = randGap();
var myObstacles = [];
var colors = ["brick","gizmo","turtle","flower","bullet","pipe","plant2"];
var audio = document.getElementById("audio");
var audio1 = document.getElementById("audio1");
var bgmusic = document.getElementById("bgmusic");
var gamescore = 0;

// üñºÔ∏è Images
var pimage = new Image(); pimage.src = "walk.png";
var standimage = new Image(); standimage.src = "stand.png";
var brickimage = new Image(); brickimage.src = "brickenemy1.png";
var pipeimage = new Image(); pipeimage.src = "pipe.png";
var gizmoimage = new Image(); gizmoimage.src = "gizmo.png";
var turtleimage = new Image(); turtleimage.src = "turtle.png";
var flowerimage = new Image(); flowerimage.src = "flower.png";
var bulletimage = new Image(); bulletimage.src = "bullet.png";
var plant2image = new Image(); plant2image.src = "plant2.png";

function startGame(){
	document.getElementById("startBtn").style.display = "none";
	bgmusic.volume = 0.9;
	bgmusic.play();
	gamearea.start();
}

function everyinterval(n){
	return gamearea.frame % n == 0;
}

function jump(){
	player.speedY = -2;
	audio.play();
}

function randGap(){
	return Math.floor(minGap + Math.random() * (maxGap - minGap + 1));
}

var scoreText = {
	x: 220,
	y: 200,
	update: function(text){
		gamearea.context.fillStyle = "white";
		gamearea.context.font = "30px Consolas";
		gamearea.context.fillText(text, this.x, this.y);
	}
}

// üë®‚ÄçüöÄ Player
var player = {
	x: 20,
	y: 470,
	speedY: 0,
	update: function(){
		if(this.y < 470)
			gamearea.context.drawImage(pimage, this.x, this.y - 50, 75, 80);
		else
			gamearea.context.drawImage(standimage, this.x, this.y - 50, 70, 80);
	},
	newPos: function(){
		if(this.y < 280) this.speedY = 2;
		this.y += this.speedY;
		if(this.speedY == 2 && this.y == 470) this.speedY = 0;
	},
	crashWith: function(obs){
		return (this.x + 30 > obs.x && this.x < obs.x + obs.width && this.y + 30 > obs.y);
	}
}

// ‚úÖ Enlarged and properly positioned obstacles
function obstacle(){
	this.x = 1000;
	this.y = 400; // ground level fixed
	this.index = Math.floor(Math.random() * colors.length);
	this.color = colors[this.index];
	this.width = 100;
	this.height = 100;

	this.draw = function(){
		let ctx = gamearea.context;

		if(this.color == "brick"){
			ctx.drawImage(brickimage, this.x, this.y, 100, 100);
		}
		else if(this.color == "flower"){
			ctx.drawImage(flowerimage, this.x, this.y - 10, 100, 110);
		}
		else if(this.color == "gizmo"){
			ctx.drawImage(gizmoimage, this.x, this.y + 15, 100, 85);
		}
		else if(this.color == "turtle"){
			ctx.drawImage(turtleimage, this.x, this.y, 110, 100);
		}
		else if(this.color == "bullet"){
			ctx.drawImage(bulletimage, this.x, this.y + 30, 80, 80);
		}
		else if(this.color == "pipe"){
			ctx.drawImage(pipeimage, this.x, this.y - 40, 100, 140);
		}
		else if(this.color == "plant2"){
			ctx.drawImage(plant2image, this.x, this.y - 20, 100, 120);
		}
		else {
			ctx.drawImage(pipeimage, this.x, this.y, 100, 100);
		}
	}
}

var gamearea = {
	canvas: document.createElement("canvas"),
	start: function(){
		this.canvas.height = 500;
		this.canvas.width = 600;
		document.body.insertBefore(this.canvas, document.body.childNodes[0]);
		this.context = this.canvas.getContext("2d");
		this.frame = 0;
		this.score = 0;
		scoreText.update("Score: 0");
		this.interval = setInterval(this.updateGameArea, 5);
		window.addEventListener("keydown", jump);
	},
	updateGameArea: function(){
		for(i = 0; i < myObstacles.length; i++){
			if(player.crashWith(myObstacles[i])){
				gamearea.stop();
				return;
			}
		}
		gamearea.clear();
		if(everyinterval(gap)){
			myObstacles.push(new obstacle());
			gap = randGap();
			gamearea.frame = 0;
		}
		for(i = 0; i < myObstacles.length; i++){
			myObstacles[i].x -= 1.5;
			myObstacles[i].draw();
		}
		player.newPos();
		player.update();
		gamearea.frame += 1;
		gamearea.score += 0.01;
		gamescore = Math.floor(gamearea.score);
		scoreText.update("Score: " + gamescore);
	},
	clear: function(){
		gamearea.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
	},
	stop: function(){
		clearInterval(this.interval);
		gamearea.context.fillStyle = "white";
		gamearea.context.font = "30px Consolas";
		gamearea.context.fillText("GAME OVER!!!", 200, 250);
		audio1.play();
		bgmusic.pause();
		bgmusic.currentTime = 0;
	}
}
</script>

<img src="platform.png" id="platformimage">
</body>
</html>
